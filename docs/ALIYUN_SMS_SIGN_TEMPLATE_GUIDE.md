# 阿里云短信签名和模板申请详细指南

## 📋 前置条件

在开始申请之前，确保：
- ✅ 短信服务已激活（Short Message Service 已激活）
- ✅ 账号已完成实名认证（个人或企业认证）
- ✅ 有可用的 AccessKey（用于后续在 Vercel 配置）

---

## 第一部分：申请短信签名

### 步骤 1：进入签名管理页面

1. 在阿里云控制台，点击 **Short Message Service**（短信服务）
2. 在左侧导航栏，点击 **Go China**（国内消息）
3. 点击 **签名管理**（Signature Management）
4. 点击右上角的 **添加签名**（Add Signature）按钮

### 步骤 2：填写签名信息

#### 2.1 基本信息

| 字段 | 说明 | 示例 | 注意事项 |
|------|------|------|----------|
| **签名名称** | 2-12 个字符，用于标识发送方 | `日语假名工具`、`Furigana`、`日语学习助手` | 不能包含特殊符号，建议使用中文或英文 |
| **签名来源** | 选择签名的来源类型 | **网站** 或 **APP** | 根据你的项目类型选择 |

#### 2.2 如果选择"网站"（Website）

| 字段 | 说明 | 示例 |
|------|------|------|
| **网站地址** | 你的网站 URL | `https://furigana-app-hsl.vercel.app` |
| **网站备案号** | 如果网站已备案 | `京ICP备12345678号`（可选，但有助于审核） |
| **网站截图** | 网站首页或相关页面截图 | 上传 PNG/JPG 图片（可选，但强烈推荐） |

**网站截图建议**：
- 截图显示网站名称/Logo
- 显示网站功能（如"日语假名标注工具"）
- 清晰可见，不要模糊

#### 2.3 如果选择"APP"（Application）

| 字段 | 说明 | 示例 |
|------|------|------|
| **APP 名称** | 应用名称 | `日语假名工具` |
| **APP 下载链接** | 应用商店下载链接 | `https://apps.apple.com/...` 或 `https://play.google.com/...` |
| **APP 截图** | 应用界面截图 | 上传应用截图（可选但推荐） |

#### 2.4 申请说明（必填）

填写签名用途说明，例如：

```
用于日语假名标注工具的登录验证码发送。用户通过手机号登录时，系统会发送验证码短信，签名用于标识发送方身份。
```

**建议内容**：
- 说明签名用途（登录验证码）
- 说明使用场景（手机号登录）
- 说明服务内容（日语假名标注工具）

### 步骤 3：提交审核

1. 检查所有信息是否填写完整
2. 确认签名名称符合规范（2-12 字符，无特殊符号）
3. 点击 **提交审核**（Submit）按钮

### 步骤 4：等待审核

- **审核时间**：通常 **1-3 个工作日**
- **审核状态**：可在 **签名管理** 页面查看
  - **审核中**（Pending）：等待审核
  - **审核通过**（Approved）：可以使用
  - **审核驳回**（Rejected）：需要修改后重新提交

### 步骤 5：审核通过后

- 记录 **签名名称**（Sign Name），例如：`日语假名工具`
- 这个名称将用于 Vercel 环境变量 `SMS_SIGN_NAME`

---

## 第二部分：申请短信模板

### 步骤 1：进入模板管理页面

1. 在短信服务控制台，点击 **Go China**（国内消息）
2. 点击 **模板管理**（Template Management）
3. 点击右上角的 **添加模板**（Add Template）按钮

### 步骤 2：选择模板类型

选择 **验证码**（Verification Code）类型

**注意**：验证码模板用于发送登录验证码，这是最常用的类型。

### 步骤 3：填写模板信息

#### 3.1 基本信息

| 字段 | 说明 | 示例 | 注意事项 |
|------|------|------|----------|
| **模板名称** | 模板的标识名称 | `登录验证码模板` | 仅用于管理，用户看不到 |
| **模板类型** | 选择模板类型 | **验证码** | 必须选择"验证码" |

#### 3.2 模板内容（最重要）

**格式要求**：
- 必须包含 `${code}` 变量（验证码）
- 可以包含其他变量，如 `${minutes}`（有效期分钟数）
- 总长度不超过 70 个字符（含变量）
- 不能包含营销内容

**推荐模板内容**：

**方案一（简洁版）**：
```
您的验证码是${code}，10分钟内有效。请勿泄露给他人。
```

**方案二（详细版）**：
```
您的验证码是${code}，${minutes}分钟内有效。请勿泄露给他人。【日语假名工具】
```

**方案三（英文版）**：
```
Your verification code is ${code}. It expires in ${minutes} minutes.
```

**方案四（日文版，如果支持）**：
```
認証コードは${code}です。${minutes}分間有効です。
```

**变量说明**：
- `${code}`：6 位数字验证码（必填）
- `${minutes}`：有效期分钟数（可选，如 10）

#### 3.3 申请说明（必填）

填写模板用途说明，例如：

```
用于日语假名标注工具的登录验证码发送。用户通过手机号登录时，系统会发送包含6位数字验证码的短信，验证码有效期为10分钟。
```

**建议内容**：
- 说明模板用途（登录验证码）
- 说明验证码格式（6位数字）
- 说明有效期（10分钟）
- 说明使用场景（手机号登录）

### 步骤 4：提交审核

1. 检查模板内容是否符合规范
2. 确认包含 `${code}` 变量
3. 确认长度不超过 70 字符
4. 点击 **提交审核**（Submit）按钮

### 步骤 5：等待审核

- **审核时间**：通常 **1-3 个工作日**
- **审核状态**：可在 **模板管理** 页面查看
  - **审核中**（Pending）：等待审核
  - **审核通过**（Approved）：可以使用
  - **审核驳回**（Rejected）：需要修改后重新提交

### 步骤 6：审核通过后

- 记录 **模板代码**（Template Code），格式如：`SMS_123456789`
- 这个代码将用于 Vercel 环境变量 `SMS_TEMPLATE_CODE`

---

## 第三部分：常见问题和注意事项

### ❌ 签名申请常见错误

#### 1. 签名名称不符合规范

**错误示例**：
- `日语假名工具！`（包含特殊符号）
- `A`（少于 2 个字符）
- `这是一个非常长的签名名称超过了12个字符`（超过 12 个字符）

**正确示例**：
- `日语假名工具`
- `Furigana`
- `日语学习助手`

#### 2. 签名来源选择错误

- 如果项目是网站，必须选择 **网站**
- 如果项目是 APP，必须选择 **APP**
- 选择错误会导致审核失败

#### 3. 申请说明不清晰

- 必须说明签名的具体用途
- 不能只写"用于发送短信"这种模糊描述
- 建议详细说明使用场景

### ❌ 模板申请常见错误

#### 1. 模板内容缺少 `${code}` 变量

**错误示例**：
```
您的验证码是123456，10分钟内有效。
```

**正确示例**：
```
您的验证码是${code}，10分钟内有效。
```

#### 2. 模板内容包含营销信息

**错误示例**：
```
您的验证码是${code}，10分钟内有效。点击链接购买优惠商品！
```

**正确示例**（验证码模板不能包含营销内容）：
```
您的验证码是${code}，10分钟内有效。请勿泄露给他人。
```

#### 3. 模板内容过长

- 总长度不能超过 70 个字符（含变量）
- 建议控制在 50 字符以内，确保显示完整

#### 4. 变量格式错误

**错误示例**：
- `{code}`（缺少 `$`）
- `$code`（缺少花括号）
- `${验证码}`（变量名必须是英文）

**正确示例**：
- `${code}`
- `${minutes}`

### ✅ 提高审核通过率的技巧

#### 对于签名：

1. **提供网站截图**：清晰显示网站名称和功能
2. **详细填写申请说明**：说明具体用途和使用场景
3. **签名名称与网站一致**：签名名称最好与网站名称或功能相关
4. **如有备案号，填写备案号**：有助于审核通过

#### 对于模板：

1. **模板内容简洁明了**：不要添加无关信息
2. **详细填写申请说明**：说明验证码格式、有效期、使用场景
3. **使用标准格式**：参考阿里云提供的模板示例
4. **避免敏感词汇**：不要包含可能被误判为营销的词汇

---

## 第四部分：审核通过后的配置

### 步骤 1：记录关键信息

申请通过后，记录以下信息：

| 信息 | 变量名 | 示例值 |
|------|--------|--------|
| 签名名称 | `SMS_SIGN_NAME` | `日语假名工具` |
| 模板代码 | `SMS_TEMPLATE_CODE` | `SMS_123456789` |

### 步骤 2：在 Vercel 配置环境变量

1. 打开 Vercel 项目：`furigana-app-hsl`
2. 进入 **Settings** → **Environment Variables**
3. 添加以下变量：

| 变量名 | 值 | 说明 |
|--------|-----|------|
| `SMS_SIGN_NAME` | `日语假名工具` | 签名名称（与申请的一致） |
| `SMS_TEMPLATE_CODE` | `SMS_123456789` | 模板代码 |

4. 勾选 **Production**、**Preview**、**Development**
5. 点击 **Save**

### 步骤 3：重新部署

1. 进入 **Deployments** 标签
2. 找到最新部署，点击 **⋯** → **Redeploy**
3. 等待部署完成

### 步骤 4：测试短信功能

1. 访问 `https://furigana-app-hsl.vercel.app/login`
2. 选择 **手机登录** Tab
3. 输入手机号，点击 **发送验证码**
4. 检查手机是否收到验证码短信

---

## 第五部分：审核被驳回的处理

### 如果签名审核被驳回

1. **查看驳回原因**：在签名管理页面查看具体原因
2. **修改信息**：根据驳回原因修改签名信息
   - 签名名称不符合规范 → 修改名称
   - 申请说明不清晰 → 补充详细说明
   - 缺少证明材料 → 上传网站截图或备案信息
3. **重新提交**：修改后重新提交审核

### 如果模板审核被驳回

1. **查看驳回原因**：在模板管理页面查看具体原因
2. **修改模板内容**：
   - 缺少 `${code}` 变量 → 添加变量
   - 包含营销内容 → 删除营销信息
   - 内容过长 → 缩短内容
   - 变量格式错误 → 修正变量格式
3. **重新提交**：修改后重新提交审核

### 联系客服

如果多次被驳回，可以：
1. 在阿里云控制台提交工单
2. 说明具体情况和驳回原因
3. 请求客服协助审核

---

## 📝 总结

### 申请流程总结：

1. ✅ **申请签名**：签名管理 → 添加签名 → 填写信息 → 提交审核
2. ✅ **申请模板**：模板管理 → 添加模板 → 填写内容 → 提交审核
3. ✅ **等待审核**：1-3 个工作日
4. ✅ **配置环境变量**：在 Vercel 添加 `SMS_SIGN_NAME` 和 `SMS_TEMPLATE_CODE`
5. ✅ **重新部署**：部署后测试短信功能

### 关键要点：

- **签名名称**：2-12 字符，无特殊符号，与网站/APP 相关
- **模板内容**：必须包含 `${code}` 变量，不超过 70 字符
- **申请说明**：详细说明用途和使用场景，有助于审核通过
- **审核时间**：通常 1-3 个工作日，请耐心等待

---

## 🆘 需要帮助？

如果遇到问题：
1. 查看阿里云帮助文档：https://help.aliyun.com/product/44282.html
2. 提交工单联系客服
3. 查看审核驳回原因，针对性修改
