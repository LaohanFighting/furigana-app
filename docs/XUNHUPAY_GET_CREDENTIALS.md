# 虎皮椒 APPID 和 APPSECRET 获取指南

## 📍 获取位置

APPID 和 APPSECRET 在虎皮椒商户后台的 **"支付渠道管理"** → **"我的支付渠道"** 中获取。

---

## 详细步骤

### 第一步：登录虎皮椒商户后台

1. 访问 [虎皮椒官网](https://www.xunhupay.com)
2. 点击右上角 **登录**
3. 使用注册的手机号和密码登录

### 第二步：进入支付渠道管理

登录后，在商户后台：

1. 找到左侧导航菜单
2. 点击 **支付渠道管理** 或 **渠道管理**
3. 点击 **我的支付渠道** 或 **支付渠道**

### 第三步：查看或创建支付渠道

#### 情况一：已有支付渠道

如果已经创建过支付渠道：

1. 在 **我的支付渠道** 列表中，找到你的支付渠道
2. 点击 **查看** 或 **详情**
3. 在详情页面可以看到：
   - **APPID**（应用ID）
   - **APPSECRET**（应用密钥）

#### 情况二：还没有支付渠道

如果还没有创建支付渠道，需要先创建：

1. 在 **我的支付渠道** 页面，点击 **创建支付渠道** 或 **新增渠道**
2. 填写渠道信息：
   - **渠道名称**：如 "日语假名工具"
   - **网站地址**：`https://furigana-app-hsl.vercel.app`
   - **业务描述**：填写你的业务说明
   - **其他必填信息**：按提示填写
3. 提交审核
4. 等待审核通过（通常 1-2 个工作日）
5. 审核通过后，在渠道详情中可以看到 APPID 和 APPSECRET

### 第四步：复制 APPID 和 APPSECRET

1. 在支付渠道详情页面，找到：
   - **APPID**：一串数字或字母数字组合
   - **APPSECRET**：一串较长的密钥字符串
2. **重要**：APPSECRET 通常只显示一次，请立即复制保存
3. 如果 APPSECRET 被隐藏，点击 **显示** 或 **查看** 按钮
4. 复制这两个值，准备配置到 Vercel

---

## 常见位置说明

### 可能的位置名称

在不同版本的虎皮椒后台，可能显示为：

| 可能的名称 | 说明 |
|-----------|------|
| **支付渠道管理** | 主菜单 |
| **我的支付渠道** | 子菜单 |
| **应用管理** | 另一种叫法 |
| **我的应用** | 应用列表 |
| **API 设置** | 可能包含凭证信息 |
| **商户信息** | 可能包含凭证信息 |

### 如果找不到

如果找不到上述位置，可以：

1. **查看帮助文档**：
   - 访问：https://www.xunhupay.com/doc/prepare.html
   - 查看"接入前准备"章节

2. **联系客服**：
   - 在虎皮椒后台找到 **工单系统** 或 **客服中心**
   - 提交工单询问：如何获取 APPID 和 APPSECRET

3. **查看账户设置**：
   - 检查 **账户设置** → **商户信息**
   - 可能在那里显示凭证信息

---

## 凭证格式示例

### APPID 格式
- 通常是一串数字，如：`1234567890`
- 或字母数字组合，如：`app1234567890`

### APPSECRET 格式
- 通常是一串较长的字符串（32位或更长）
- 可能包含字母、数字、特殊字符
- 示例：`a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`

---

## 安全注意事项

### ⚠️ 重要提示

1. **不要泄露 APPSECRET**：
   - APPSECRET 是敏感信息，不要分享给他人
   - 不要提交到 Git 仓库
   - 只在 Vercel 环境变量中配置

2. **妥善保存**：
   - 如果 APPSECRET 丢失，可能需要重新生成
   - 建议保存在安全的密码管理器中

3. **定期检查**：
   - 定期检查凭证是否仍然有效
   - 如果发现异常，及时更换

---

## 配置到 Vercel

获取到 APPID 和 APPSECRET 后：

1. 打开 Vercel 项目：`furigana-app-hsl`
2. 进入 **Settings** → **Environment Variables**
3. 添加：
   - `PAYMENT_APPID` = 你的 APPID
   - `PAYMENT_KEY` = 你的 APPSECRET
4. 保存并重新部署

---

## 验证配置

配置完成后，可以通过以下方式验证：

1. **查看日志**：
   - 访问 `/dashboard/upgrade`
   - 尝试创建订单
   - 查看 Vercel Functions 日志（`/api/payment/create`）
   - 如果配置正确，应该能成功调用虎皮椒 API

2. **检查错误**：
   - 如果出现 "Payment not configured"，说明环境变量未配置
   - 如果出现签名错误，检查 APPSECRET 是否正确

---

## 📝 总结

### 获取流程：

1. ✅ **登录虎皮椒商户后台**
2. ✅ **进入支付渠道管理** → **我的支付渠道**
3. ✅ **查看或创建支付渠道**
4. ✅ **复制 APPID 和 APPSECRET**
5. ✅ **配置到 Vercel 环境变量**

### 关键位置：

- **主菜单**：支付渠道管理
- **子菜单**：我的支付渠道
- **详情页**：显示 APPID 和 APPSECRET

---

## 🆘 需要帮助？

如果仍然找不到：

1. **查看官方文档**：https://www.xunhupay.com/doc/prepare.html
2. **联系虎皮椒客服**：在后台提交工单
3. **检查账户状态**：确认是否已完成签约和实名认证
